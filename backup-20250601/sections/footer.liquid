<!-- Clean Footer Section -->
<footer class="footer {% if section.settings.style == 'dark' %}footer--dark{% endif %}" 
        id="section-{{ section.id }}"
        role="contentinfo">
  <div class="container">
    <div class="footer__content">
      
      {% for block in section.blocks %}
        {% case block.type %}
          
          {% when 'logo' %}
            <div class="footer__section" >
              <div class="footer__logo">
                {% if block.settings.logo_type == 'image' and block.settings.logo != blank %}
                  <img src="{{ block.settings.logo | image_picker_url: 'logo.png' }}" 
                       alt="{{ block.settings.image_alt | default: site.title }}"
                       width="{{ block.settings.logo_width | default: '120' }}"
                       height="auto">
                {% else %}
                  <span class="footer__logo-text">{{ block.settings.logo_text | default: site.title }}</span>
                {% endif %}
              </div>
              {% if block.settings.description %}
                <p class="footer__description">{{ block.settings.description }}</p>
              {% endif %}
            </div>
          
          {% when 'menu' %}
            <div class="footer__section" >
              {% if block.settings.title %}
                <h3 class="footer__title">{{ block.settings.title }}</h3>
              {% endif %}
              <ul class="footer__menu">
                {% for link in current_site.link_lists[block.settings.menu].links %}
                  <li>
                    <a href="{{ link.url }}" 
                       class="footer__link"
                       {% if block.settings.new_tab %}target="_blank" rel="noopener"{% endif %}>
                      {{ link.name }}
                    </a>
                  </li>
                {% endfor %}
              </ul>
            </div>
          
          {% when 'text' %}
            <div class="footer__section" >
              {% if block.settings.title %}
                <h3 class="footer__title">{{ block.settings.title }}</h3>
              {% endif %}
              <div class="footer__text">
                {{ block.settings.text }}
              </div>
            </div>
          
          {% when 'newsletter' %}
            <div class="footer__section" >
              {% if block.settings.title %}
                <h3 class="footer__title">{{ block.settings.title }}</h3>
              {% endif %}
              {% if block.settings.description %}
                <p class="footer__description">{{ block.settings.description }}</p>
              {% endif %}
              <form action="{{ routes.newsletter_signup_url }}" method="post" class="footer__newsletter">
                <div class="footer__newsletter-input">
                  <input type="email" 
                         name="email" 
                         placeholder="{{ block.settings.placeholder | default: 'Enter your email' }}"
                         class="form-control"
                         required>
                  <button type="submit" class="btn btn--primary">
                    {{ block.settings.button_text | default: 'Subscribe' }}
                  </button>
                </div>
              </form>
            </div>
          
        {% endcase %}
      {% endfor %}
      
    </div>
    
    <!-- Copyright Bar -->
    <div class="footer__bottom">
      <div class="footer__copyright">
        &copy; {{ 'now' | date: '%Y' }} {{ section.settings.copyright | default: site.title }}. 
        {{ section.settings.copyright_text | default: 'All rights reserved.' }}
      </div>
      
      {% if section.settings.show_powered_by %}
        <div class="footer__powered-by">
          {{ powered_by_link }}
        </div>
      {% endif %}
    </div>
    
  </div>
</footer>

{% schema %}
{
  "name": "Footer",
  "elements": [
    {
      "type": "select",
      "id": "style",
      "label": "Footer Style",
      "options": [
        { "value": "default", "label": "Default (Light)" },
        { "value": "dark", "label": "Dark" }
      ],
      "default": "default"
    },
    {
      "type": "text",
      "id": "copyright",
      "label": "Copyright Name",
      "default": "AttachmentNerd"
    },
    {
      "type": "text",
      "id": "copyright_text",
      "label": "Copyright Text",
      "default": "All rights reserved."
    },
    {
      "type": "checkbox",
      "id": "show_powered_by",
      "label": "Show Powered by Kajabi",
      "default": true
    }
  ],
  "blocks": [
    {
      "type": "logo",
      "name": "Logo",
      "limit": 1,
      "elements": [
        {
          "type": "radio",
          "id": "logo_type",
          "label": "Logo Type",
          "options": [
            { "value": "image", "label": "Image" },
            { "value": "text", "label": "Text" }
          ],
          "default": "text"
        },
        {
          "type": "image_picker",
          "id": "logo",
          "label": "Logo Image"
        },
        {
          "type": "text",
          "id": "logo_text",
          "label": "Logo Text",
          "default": "AttachmentNerd"
        },
        {
          "type": "text",
          "id": "logo_width",
          "label": "Logo Width (px)",
          "default": "120"
        },
        {
          "type": "text",
          "id": "description",
          "label": "Description",
          "default": "Empowering creators to share their knowledge with the world."
        }
      ]
    },
    {
      "type": "menu",
      "name": "Menu",
      "elements": [
        {
          "type": "text",
          "id": "title",
          "label": "Menu Title",
          "default": "Quick Links"
        },
        {
          "type": "link_list",
          "id": "menu",
          "label": "Menu",
          "default": "footer"
        },
        {
          "type": "checkbox",
          "id": "new_tab",
          "label": "Open links in new tab",
          "default": false
        }
      ]
    },
    {
      "type": "text",
      "name": "Text Column",
      "elements": [
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Contact"
        },
        {
          "type": "rich_text",
          "id": "text",
          "label": "Content",
          "default": "<p>Email: hello@example.com<br>Phone: (555) 123-4567</p>"
        }
      ]
    },
    {
      "type": "newsletter",
      "name": "Newsletter",
      "limit": 1,
      "elements": [
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Stay Updated"
        },
        {
          "type": "text",
          "id": "description",
          "label": "Description",
          "default": "Get the latest updates and exclusive content."
        },
        {
          "type": "text",
          "id": "placeholder",
          "label": "Input Placeholder",
          "default": "Enter your email"
        },
        {
          "type": "text",
          "id": "button_text",
          "label": "Button Text",
          "default": "Subscribe"
        }
      ]
    }
  ],
  "default": {
    "blocks": [
      {
        "type": "logo"
      },
      {
        "type": "menu"
      },
      {
        "type": "newsletter"
      }
    ]
  }
}
{% endschema %}
